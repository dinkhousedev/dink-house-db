# Cloudflare Tunnel Configuration
# Exposes only PostgreSQL and API

tunnel: 51411762-21ab-416b-a174-fe943fa9678c
credentials-file: /etc/cloudflared/cert.json

ingress:
  # Supabase API (Kong Gateway)
  - hostname: api.dinkhousepb.com
    service: http://dink-house-kong:8000
    originRequest:
      noTLSVerify: true
      connectTimeout: 30s

  # PostgreSQL Database
  - hostname: db.dinkhousepb.com
    service: tcp://dink-house-db:5432
    originRequest:
      noTLSVerify: true
      proxyType: socks

  # Catch-all rule (required)
  - service: http_status:404